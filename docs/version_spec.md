# バージョン情報コマンド機能仕様書

## 📌 概要

Shadow Director Botに、バージョン情報を確認するためのコマンドを追加しました。ユーザーが「あなたのバージョンを教えて」「バージョン」などのメッセージを送信すると、Botのバージョン番号、更新日、最新の追加機能の一覧が表示されます。

## 🎯 目的

- ユーザーがBotの現在のバージョンを簡単に確認できるようにする
- 最新の追加機能を把握できるようにする
- バージョン管理を一元化し、メンテナンス性を向上させる

## ⚙️ 実装内容

### 1. バージョン管理モジュール (`src/version.py`)

バージョン情報を一元管理するモジュールを新規作成しました。

**主な機能:**

- バージョン番号の定義 (`__version__`)
- 更新日の定義 (`__update_date__`)
- 最新機能リストの管理 (`LATEST_FEATURES`)
- 整形済みメッセージの生成 (`get_version_info()`)

**定義されている情報:**

- **バージョン**: `1.0.0`
- **更新日**: `2025-12-31`
- **最新機能**:
  - バージョン情報確認コマンドを追加
  - 助成金申請書の自動ドラフト生成機能
  - SNS投稿記事作成機能（Facebook/Instagram対応）
  - 月次活動サマリレポート自動生成
  - 助成金フォーマットファイルのダウンロード・提供機能
  - 共鳴度スコアによる助成金マッチング

### 2. ルーター設定の更新 (`config/prompts.yaml`)

バージョン確認の意図（Intent）を認識できるように、ルータープロンプトを更新しました。

**追加されたIntent:**

- **Intent名**: `VERSION`
- **キーワード**: 「バージョン」「version」「更新」「最新機能」「アップデート」「update」

### 3. オーケストレーターの更新 (`src/agents/orchestrator.py`)

バージョン確認Intentに対応する処理を追加しました。

**実装内容:**

1. `src.version`モジュールからの`get_version_info()`関数のインポート
2. `_classify_intent()`メソッドでVERSION intentの認識
3. `route_message()`メソッドでVERSION intentの処理

## 💬 使い方

ユーザーは以下のようなメッセージでバージョン情報を確認できます:

- 「あなたのバージョンを教えて」
- 「バージョン」
- 「最新機能は？」
- 「アップデート情報」
- "version"
- "update"

### 出力例

```markdown
# 🤖 Shadow Director バージョン情報

**バージョン**: `1.0.0`
**更新日**: `2025-12-31`

---

## 📋 最新の追加機能

  ✅ バージョン情報確認コマンドを追加
  ✅ 助成金申請書の自動ドラフト生成機能
  ✅ SNS投稿記事作成機能（Facebook/Instagram対応）
  ✅ 月次活動サマリレポート自動生成
  ✅ 助成金フォーマットファイルのダウンロード・提供機能
  ✅ 共鳴度スコアによる助成金マッチング

---

💡 **ヒント**: 「ヘルプ」と送信すると、全ての利用可能なコマンドを確認できます。
```

## 🔧 メンテナンス方法

### バージョン番号を更新する場合

`src/version.py`の以下の部分を編集してください:

```python
__version__ = "1.0.0"  # ← バージョン番号を更新
__update_date__ = "2025-12-31"  # ← 更新日を変更
```

### 新機能を追加する場合

`LATEST_FEATURES`リストに新しい機能を追加してください:

```python
LATEST_FEATURES = [
    "新しい機能の説明",  # ← 最新の機能を先頭に追加
    "バージョン情報確認コマンドを追加",
    # ...既存の機能
]
```

## 🔒 セキュリティ

- バージョン情報の表示にはハードコーディングを使用していますが、これは公開情報であるため問題ありません
- 機密情報（APIキーやトークン等）は一切含まれていません
- 環境変数などの動的な設定情報も表示されません

## 📝 関連ファイル

- `src/version.py` - バージョン情報管理モジュール
- `config/prompts.yaml` - ルーター設定（VERSION Intentの定義）
- `src/agents/orchestrator.py` - オーケストレーター（VERSION Intentの処理）

## 🧪 テスト方法

以下のコマンドで`version.py`の動作をテストできます:

```bash
python src/version.py
```

期待される出力:
```
# 🤖 Shadow Director バージョン情報

**バージョン**: `1.0.0`
**更新日**: `2025-12-31`

...
```

## 📅 更新履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|---------|
| 2025-12-31 | 1.0.0 | バージョン情報コマンド機能を追加 |
